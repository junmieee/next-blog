---
title: Parcel 개발시 실행과빌드
date: 2022-01-11
tags: 
- Node.js
---

프로젝트 루트 경로에 제일 처음 시작할 파일 index.html과 main.js파일을 만들어 준다. 

![스크린샷 2023-01-12 오후 4.46.18.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/22849bac-b0cd-47b0-9b01-aa044891ed98/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-01-12_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.46.18.png)

main.js파일에서 아래와 같은 코드를 작성한다. node_modules파일에서 lodash 패키지 기능을 가져와서 _ 기호의 변수로 사용할 수 있음. 

main.js파일에 아래와 같은 코드를 작성한다. 

```jsx
console.log(_.upperCase('hello-world'));
```

*hello-world 문자를 대문자로 바꾸는 코드 

main.js파일을 index.html파일에 연결해준다. 

![스크린샷 2023-01-12 오후 4.51.48.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/925e9a09-ecef-4b47-821e-9a68c5cd3869/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-01-12_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.51.48.png)

- Parcel 번들러를 통해서 브라우저에 출력해보기
    
    
    기존에는 html파일을 통해 우클릭을 누르고 나타나는 메뉴 하단의 ‘Open with live server’라는 확장프로그램의 도움으로 개발서버를 오픈해서 브라우저에 출력했다. 이는 브라우저에서 동작할 수 있는 상태로 개발서버를 오픈해주는 간단한 도움을 줄 수 있는 프로그램일 뿐이다.
    
    실제로 고도화된 작업을 할 때 사용하는 Parcel번들러를 통해 개발서버를 오픈해 보자. 
    
    Package.json파일에서 scripts라는 옵션에서  ‘test’→ ‘dev’로 바꿔주고 값은 비워둔다. 
    
    ![스크린샷 2023-01-12 오후 4.58.30.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/42d7206c-6486-449f-8c8a-add0bbf70dea/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-01-12_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.58.30.png)
    
    비워둔 값에 아래와 같이 입력한다. 
    
    ![스크린샷 2023-01-12 오후 5.01.38.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/f196efde-068f-4981-9ca4-0723525f9eef/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-01-12_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.01.38.png)
    
    → parcel이라는 패키지를 현제 프로젝트에서만 사용하겠다고 설치를 한 것이기 때문에 터미널에서 해당 명령(parcel ./index.html)을 실행할 수  없다. 
    
    따라서 우리의 패키지에서만 동작하는 명령을 별도의 scripts로 등록해야지만 터미널에서 사용할 수 있음. 
    
    ```jsx
    "scripts": {
        "dev": "parcel ./index.html"
      },
    ```
    

“dev”라는 이름은 개발서버를 오픈하는 용도로 지은 이름. 해당 부분은 자신이 원하는 이름으로 지어도 되지만 구분하기 쉽게 직관적인 용어로 짓는 것이 낫다. 

- ‘Dev’라고 만든 Scripts 내용이 터미널에서 동작하게 하려면 아래와 같은 명령어를 입력한다.

```jsx
npm run dev
```

*npm run + 스크립트 이름

터미널에 설치하게 되면 아래와 같은 에러 메세지가 나타난다. 

![스크린샷 2023-01-12 오후 5.09.32.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/459636e8-eeca-4ed0-8fc9-f3ad0c434912/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-01-12_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.09.32.png)

→ 문제: 우리는 Import라는 코드를 JS코드에 사용을 했다. Import라는 키워드를 사용하는 자바스크립트 파일은 ‘모듈’이라는 개념으로 불리게 된다. 이러한 모듈 자바스크립트는 html에서 가져올 때 특정한 명령이 더 필요하게 된다. 그 때 사용하는 명령이 type이라는 속성에 module이라는 속성을 추가해야 한다. 

![스크린샷 2023-01-12 오후 5.13.43.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/cc11f89f-b1a7-48a0-ba38-a779dcabbd3f/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-01-12_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.13.43.png)

*위와 같이 index.html파일에서 script에 ‘type=”module”을 추가해준다. 

아래와 같이 정상적으로 빌드가 되었다는 메세지가 터미널에 뜨게된다. 

![스크린샷 2023-01-12 오후 5.15.47.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/53945df9-a19a-4b9b-9b8f-f0cb36baddbe/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-01-12_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.15.47.png)

빌드가 되었다는 것은 현재 parcel 번들러가 index.html파일을 분석해서 그곳에 연결이 되어져있는 자바스크립트 파일도 분석을 하고 그 내용으로 실제 브라우저에서 출력할 수 있는 결과물을 만들었다는 것. 

터미널에 입력된 주소를 클릭하면 브라우저가 열린다. 

- 결과
    
    아래와 같이 개발자도구의 콘솔창에 HELLO WORLD가 출력되어 있는 것을 확인할 수 있다. 
    
    ![스크린샷 2023-01-12 오후 9.16.10.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/064ff059-591e-4eac-aca1-7c070695020d/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-01-12_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_9.16.10.png)
    

### 브라우저에서 직접 동작하지 않는 파일 포함해 보기

- Typescript를 사용해보자

main.ts파일로 변경하고 아래와 같은 코드를 작성해보자

![스크린샷 2023-01-12 오후 9.22.37.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e6c220c7-905e-45a8-8f4a-c8e78ac59d96/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-01-12_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_9.22.37.png)

index.html파일에 script의 scr도 TS파일로 변경해준다. 

![스크린샷 2023-01-12 오후 9.25.29.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/da6a55b0-d628-45e4-84a8-dbeee383a727/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-01-12_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_9.25.29.png)

TypeScript는 브라우저에서 직접적으로 동작할 수 없다. 따라서 Parcel 번들러가 브라우적에서 작동할 수 있도록 JS로 변환을 해준다. 

그럼 console.log를 이용해 콘솔창에 출력해보자. 

![스크린샷 2023-01-12 오후 9.29.03.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/eeb5af9e-d63f-4906-ac78-0ba836ea809e/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-01-12_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_9.29.03.png)

아래와 같이 출력이 되는 것을 확인할 수 있다. 

![스크린샷 2023-01-12 오후 9.29.46.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/00ad17d1-61dd-4d36-851c-8270300dbec8/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-01-12_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_9.29.46.png)

> npm 프로젝트를 만든다는 것은 브라우저에 직접 동작하지는 않지만 편리하게 쓸 수 있는 TypeScript와 같은 개념을 도입해서 조금더 편리하고 강력한 기능으로 개발을 하고, Parcel이라는 번들러를 통해서 브라우저에서 동작할 수 있는 HTML, CSS, JS파일로 변환을 거쳐 확인할 수 있다.
> 

### 그렇다면 변환된 결과는 어디에서 확인할 수 있을까?

아래와 같은 dist파일이 보인다. DIST는 distribute의 약자로 실제로 서비스가 될 결과의 폴더이다. 

![스크린샷 2023-01-12 오후 9.33.41.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/ff9df34c-0fa6-4df4-9366-02e3322b076a/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-01-12_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_9.33.41.png)

dist의 HTML파일을 열어보면 프로젝트의 루트 경로에 가지고 있는 HTML파일과 굉장히 유사한 파일을 볼 수 있다. 

다른 부분은 Script 코드인데, 이는 main.ts를 parcel 번들러가 변환을 해서 자바스크립트 파일로 만든다. 그리고 그렇게 만들어진 JS파일을 dist 폴더 안에 있는 index.html파일이 가져와서 사용하고 있다. 결국 우리가 브라우저에서 확인한 화면은 DIST폴더의 index.html파일이다. 

![스크린샷 2023-01-12 오후 9.35.02.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/fa7a3b39-f8c8-4864-81f8-6ceda4a4f974/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-01-12_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_9.35.02.png)

## 빌드

우리가 pakage.json파일에 명시해 놓은 dev script는 개발 서버를 오픈하는 용도의 Script였다. 이것을 실제 제품화 해서 사용자가 볼 결과로 배포를 하려면 제품용으로 빌드하는 과정이 필요하다. 그 때 필요한 새로운 script를 추가해 보자.

![스크린샷 2023-01-12 오후 9.46.34.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4ecaaa1f-0a06-49f5-ba0f-85adb3e71719/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-01-12_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_9.46.34.png)

```jsx
"scripts": {
    "dev": "parcel ./index.html",
    "build": "parcel build ./index.html"
  },
```

 

터미널에 아래와 같은 명령어를 입력해보자. 

![스크린샷 2023-01-12 오후 9.47.35.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e21d71b4-9aa5-4fc0-b562-19ee65d8970f/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-01-12_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_9.47.35.png)

명령어를 입력하면 아래와 같은 오류 메세지가 뜬다. 오류의 내용은 main파일로 Index.js가 설정이 되어 있는데 이는 우리가 지정한 HTMl확장와 일치하지 않는다는 내용이다. 

![스크린샷 2023-01-12 오후 9.50.46.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/8bfb26b2-6eb6-4a0b-b864-f3f3db70e356/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-01-12_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_9.50.46.png)

package.json의 main옵션의 index.js라는 파일 이름이 명시가 되어 있다. 이는 우리가 직접 입력한 것이 아니고 터미널에서 npm init을 실행할 때 자동으로 만들어진 파일이다. 결과적으로 Parcel번들러는 main옵션에 영향을 받고 있는 것. 

![스크린샷 2023-01-12 오후 9.53.09.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/147953a3-c727-4f33-969c-7cf9c74ae555/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-01-12_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_9.53.09.png)

따라서 이 부분은 제거해 준다. 

![스크린샷 2023-01-12 오후 9.57.27.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/dcaf59b7-8656-4009-a8d0-69582f575d99/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-01-12_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_9.57.27.png)

제거 후 다시 npm run build 명령어를 실행시키면 아래와 같이 빌드를 완료하고 프로젝트에 dist라는 폴더가 다시 만들어 진 것을 볼 수 있다. 

![스크린샷 2023-01-12 오후 9.58.15.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1a99c3e9-b783-4131-a1e8-cfe244efff37/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-01-12_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_9.58.15.png)

이제 실제 제품용으로 Build가 된 것이다. dist 폴더의 index.html파일을 살펴보자. 

![스크린샷 2023-01-12 오후 10.00.50.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b11a569f-574c-41fb-8980-52871b65d967/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-01-12_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_10.00.50.png)

위와 같이 코드가 한 줄로 작성된 것을 볼 수 있다. 이는 난독화가 되어져 있다고 말할 수 있다. 즉, 읽기가 어렵게 구성되어져 있는 것이다. 물론 읽기 어려운 것은 우리의 입장이고, 실제로 이 부분은 브라우저에서 동작될 때 아무런 문제가 없다. 

난독화를 거치는 이유는 줄바꿈, 띄어쓰기 등 불필요한 문자들이 포함되기 때문에 그만큼 용량이 늘어나게 된다. 하지만, 이 dist라는 폴더는 개발하기 위해 만들어진 용도가 아니고, 브라우저에서 동작시키는 것이 목표이기 때문에 불필요한 문자들을 포함 할 필요가 없다는 것이다. 

## Parcel 번들러에 대해 더 자세하게 알고 싶다면 아래 링크를 방문해 보자.

https://parceljs.org/docs/